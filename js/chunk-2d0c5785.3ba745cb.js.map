{"version":3,"sources":["webpack:///./node_modules/@ionic/core/dist/esm-es5/tap-click-ca00ce7f.js"],"names":["startTapClick","config","scrollingEl","activatableEle","activeRipple","activeDefer","lastTouch","MOUSE_WAIT","lastActivated","useRippleEffect","getBoolean","clearDefers","WeakMap","isScrolling","undefined","parentElement","onTouchStart","ev","pointerDown","onTouchEnd","pointerUp","onMouseDown","t","onMouseUp","cancelActive","clearTimeout","removeActivated","setActivatedElement","getActivatableTarget","el","_a","x","y","has","Error","classList","contains","ACTIVATED","addActivated","deferId","get","delete","delay","isInstant","ADD_ACTIVATED_DEFERS","remove","setTimeout","Date","now","add","rippleEffect","getRippleEffect","addRipple","removeRipple","then","smooth","active","time","CLEAR_STATE_DEFERS","set","doc","document","addEventListener","target","composedPath","closest","path","i","length","shadowRoot","ripple","querySelector"],"mappings":"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","file":"js/chunk-2d0c5785.3ba745cb.js","sourcesContent":["import { n as now, p as pointerCoord } from './helpers-46f4a262.js';\nvar startTapClick = function (config) {\n    var lastTouch = -MOUSE_WAIT * 10;\n    var lastActivated = 0;\n    var scrollingEl;\n    var activatableEle;\n    var activeRipple;\n    var activeDefer;\n    var useRippleEffect = config.getBoolean('animated', true) && config.getBoolean('rippleEffect', true);\n    var clearDefers = new WeakMap();\n    var isScrolling = function () {\n        return scrollingEl !== undefined && scrollingEl.parentElement !== null;\n    };\n    // Touch Events\n    var onTouchStart = function (ev) {\n        lastTouch = now(ev);\n        pointerDown(ev);\n    };\n    var onTouchEnd = function (ev) {\n        lastTouch = now(ev);\n        pointerUp(ev);\n    };\n    var onMouseDown = function (ev) {\n        var t = now(ev) - MOUSE_WAIT;\n        if (lastTouch < t) {\n            pointerDown(ev);\n        }\n    };\n    var onMouseUp = function (ev) {\n        var t = now(ev) - MOUSE_WAIT;\n        if (lastTouch < t) {\n            pointerUp(ev);\n        }\n    };\n    var cancelActive = function () {\n        clearTimeout(activeDefer);\n        activeDefer = undefined;\n        if (activatableEle) {\n            removeActivated(false);\n            activatableEle = undefined;\n        }\n    };\n    var pointerDown = function (ev) {\n        if (activatableEle || isScrolling()) {\n            return;\n        }\n        scrollingEl = undefined;\n        setActivatedElement(getActivatableTarget(ev), ev);\n    };\n    var pointerUp = function (ev) {\n        setActivatedElement(undefined, ev);\n    };\n    var setActivatedElement = function (el, ev) {\n        // do nothing\n        if (el && el === activatableEle) {\n            return;\n        }\n        clearTimeout(activeDefer);\n        activeDefer = undefined;\n        var _a = pointerCoord(ev), x = _a.x, y = _a.y;\n        // deactivate selected\n        if (activatableEle) {\n            if (clearDefers.has(activatableEle)) {\n                throw new Error('internal error');\n            }\n            if (!activatableEle.classList.contains(ACTIVATED)) {\n                addActivated(activatableEle, x, y);\n            }\n            removeActivated(true);\n        }\n        // activate\n        if (el) {\n            var deferId = clearDefers.get(el);\n            if (deferId) {\n                clearTimeout(deferId);\n                clearDefers.delete(el);\n            }\n            var delay = isInstant(el) ? 0 : ADD_ACTIVATED_DEFERS;\n            el.classList.remove(ACTIVATED);\n            activeDefer = setTimeout(function () {\n                addActivated(el, x, y);\n                activeDefer = undefined;\n            }, delay);\n        }\n        activatableEle = el;\n    };\n    var addActivated = function (el, x, y) {\n        lastActivated = Date.now();\n        el.classList.add(ACTIVATED);\n        var rippleEffect = useRippleEffect && getRippleEffect(el);\n        if (rippleEffect && rippleEffect.addRipple) {\n            removeRipple();\n            activeRipple = rippleEffect.addRipple(x, y);\n        }\n    };\n    var removeRipple = function () {\n        if (activeRipple !== undefined) {\n            activeRipple.then(function (remove) { return remove(); });\n            activeRipple = undefined;\n        }\n    };\n    var removeActivated = function (smooth) {\n        removeRipple();\n        var active = activatableEle;\n        if (!active) {\n            return;\n        }\n        var time = CLEAR_STATE_DEFERS - Date.now() + lastActivated;\n        if (smooth && time > 0 && !isInstant(active)) {\n            var deferId = setTimeout(function () {\n                active.classList.remove(ACTIVATED);\n                clearDefers.delete(active);\n            }, CLEAR_STATE_DEFERS);\n            clearDefers.set(active, deferId);\n        }\n        else {\n            active.classList.remove(ACTIVATED);\n        }\n    };\n    var doc = document;\n    doc.addEventListener('ionScrollStart', function (ev) {\n        scrollingEl = ev.target;\n        cancelActive();\n    });\n    doc.addEventListener('ionScrollEnd', function () {\n        scrollingEl = undefined;\n    });\n    doc.addEventListener('ionGestureCaptured', cancelActive);\n    doc.addEventListener('touchstart', onTouchStart, true);\n    doc.addEventListener('touchcancel', onTouchEnd, true);\n    doc.addEventListener('touchend', onTouchEnd, true);\n    doc.addEventListener('mousedown', onMouseDown, true);\n    doc.addEventListener('mouseup', onMouseUp, true);\n};\nvar getActivatableTarget = function (ev) {\n    if (ev.composedPath) {\n        var path = ev.composedPath();\n        for (var i = 0; i < path.length - 2; i++) {\n            var el = path[i];\n            if (el.classList && el.classList.contains('ion-activatable')) {\n                return el;\n            }\n        }\n    }\n    else {\n        return ev.target.closest('.ion-activatable');\n    }\n};\nvar isInstant = function (el) {\n    return el.classList.contains('ion-activatable-instant');\n};\nvar getRippleEffect = function (el) {\n    if (el.shadowRoot) {\n        var ripple = el.shadowRoot.querySelector('ion-ripple-effect');\n        if (ripple) {\n            return ripple;\n        }\n    }\n    return el.querySelector('ion-ripple-effect');\n};\nvar ACTIVATED = 'activated';\nvar ADD_ACTIVATED_DEFERS = 200;\nvar CLEAR_STATE_DEFERS = 200;\nvar MOUSE_WAIT = 2500;\nexport { startTapClick };\n"],"sourceRoot":""}